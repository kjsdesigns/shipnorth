<!DOCTYPE html>
<html>
<head>
    <title>Force Clear Cache</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <h1>🧹 Cache Clearing Tool</h1>
    <p>This page will clear your browser cache and redirect to the login page.</p>
    
    <script>
        console.log('🔄 Clearing all browser cache...');
        
        // Clear all storage
        try {
            localStorage.clear();
            sessionStorage.clear();
            console.log('✅ Cleared localStorage and sessionStorage');
        } catch (e) {
            console.log('⚠️ Could not clear storage:', e);
        }
        
        // Clear service worker caches
        if ('caches' in window) {
            caches.keys().then(names => {
                console.log(`🗑️ Clearing ${names.length} caches...`);
                return Promise.all(
                    names.map(name => {
                        console.log(`   Deleting: ${name}`);
                        return caches.delete(name);
                    })
                );
            }).then(() => {
                console.log('✅ All caches cleared');
                redirectToLogin();
            });
        } else {
            redirectToLogin();
        }
        
        function redirectToLogin() {
            console.log('🔄 Redirecting to fresh login page...');
            // Add cache busting parameter
            const timestamp = Date.now();
            window.location.href = `http://localhost:3001/login?cb=${timestamp}`;
        }
        
        // Fallback redirect after 2 seconds
        setTimeout(redirectToLogin, 2000);
    </script>
</body>
</html>